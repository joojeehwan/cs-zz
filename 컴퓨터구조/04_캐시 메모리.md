# 캐시 메모리(Cache Memory)

## 캐시 메모리란?

두 장치의 처리 속도의 차이에 의한 병목 현상을 줄이기 위해 사이에 존재하는 메모리 공간

> 1. 처리 속도가 빠른 CPU와 속도가 느린 메모리 사이의 CPU 캐시 메모리
> 2. 읽고 불러오는 속도가 느린 하드디스크와 웹페이지 사이의 병목 현상을 줄이기 위한 웹 브라우저 캐시 파일



위 1번 예시처럼 CPU가 주기억장치에 저장된 데이터를 읽어올 때, 자주 사용되는 데이터는 캐시 메모리에 저장한 뒤, 다음에 이용할 때 데이터를 캐시 메모리에서 우선적으로 찾아오면서 속도를 향상

속도가 빠르다는 장점이 있지만, 용량이 적고 비용이 비싸다는 문제점이 있다.



CPU에는 이러한 캐시 메모리가 2-3개의 계층에서 사용된다. (L1, L2, L3)

속도와 크기에 따라 분류한 것으로, 속도와 탐색 우선 순위는 L1 > L2 > L3이다.



듀얼 코어 프로세서의 캐시 메모리 배치 : 각 CPU 코어마다 독립된 L1 캐시 메모리가 있고, 두 코어가 공유하는 L2 캐시 메모리가 CPU에 내장되어 있음.

만약 L1 캐시가 128kb라면 64 + 64로 둘로 나누어 명령어를 처리하기 직전의 명령어를 임시 저장하고, 나머지에는 실행 후 데이터를 임시 저장한다. (I-Cache, D-Cache)

- L1 : CPU 내부에 존재
- L2 : CPU와 RAM 사이에 존재
- L3 : 보통 메인보드에 존재

> 크기 예시가 128kb인 정도로 크기가 작은 이유는 SRAM 가격이 매우 비싸기 때문.
>
> > SRAM이란?
> >
> > 정적 임의 접근 메모리(Static Random Access Memory)는 지속적으로 Refresh를 해줘야하는 DRAM과 달리 전원이 공급되는 한, 한 번 기록된 데이터는 지워지지 않는데, 회로가 복잡해서 집적도가 낮고 가격이 비싸다는 단점이 있음.

디스크 캐시 : 주기억장치와 보조기억장치 사이에서 존재하는 캐시



## 캐시 메모리 작동 원리

- 시간 지역성 (Temporal Locality)

  for나 while 같은 반복문에 사용되는 조건 변수처럼 한번 참조된 데이터는 잠시 후 또 참조될 가능성이 높음

- 공간 지역성 (Spatial Locality)

  A[0], A[1]과 같이 연속 접근 시, 참조된 데이터 근처의 데이터가 잠시 후 또 사용된 가능성이 높음

  특히 참조 지역성을 최대한 활용하기 위해 해당 데이터 뿐 아니라 옆 주소의 데이터도 같이 가져와 캐싱한다.

이 후 CPU가 요청한 데이터를 캐시에서 찾으면 'Cache Hit', 없어서 주기억장치에서 가져오면 'Cache Miss'라고 부른다.