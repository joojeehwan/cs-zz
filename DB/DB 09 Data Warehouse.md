# DB #9 Data Warehouse

### Data Warehouse

> 정보(Data) + 창고(Warehouse)
>
> 사용자의 의사 결정에 도움을 주기 위해 분석 가능한 형태로 변환한 데이터들이 저장되어 있는 중앙저장소

<br>

### 특성

> Data Warehouse의 4가지 특성

- 주제 지향(Subject Oriented)
  - 기존 DB는 **기능**, **업무**를 중심으로 설계
  - DW는 **주제** 중심으로 설계, 이용자에게 이해하기 쉬운 형태로 제공
- 통합(Integrated)
  - 기존 운영 시스템은 **일관성없는** 다량의 데이터를 중복 관리
  - DW는 **일관성을 유지**하며 전사적 관점에서 하나로 통합
- 시계열(Time Variant)
  - 기존 DB는 현재 시간을 기준으로 최신의 값 유지
  - DW는 **데이터 갱신 없이** 일, 월, 분기, 년 등과 같은 **기간 관련 정보** 함께 저장
- 비휘발성(Nonvolatile)
  - 기존 DB는 추가, 삭제, 변경등의 갱신 작업이 레코드 단위로 발생
  - DW는 적재가 완료되면 읽기 전용 형태의 스냅샷으로 존재

<br>

### 필요한 이유

> 그냥 쿼리로 하면 안될까?

##### <예제>

```
1. 결제 관리 시스템
	-> 사용자가 쇼핑을 하고 결제를 관리하는 시스템 (사용자 결제 목록, 결제 내역)
2. 재고 관리 시스템
	-> 현재 옷의 재고를 보고 수량을 관리하는 시스템 (현재 재고수량, 부족한 재고 수량)
3. 주문 관리 시스템
	-> 쇼핑 주문을 하는 시스템 (주문 내역)
4. 회원 관리 시스템
	-> 쇼핑몰 가입 / 탈퇴를 관리하는 시스템 (사용자 나이, 성별, 주소, 유저 id)
	
Q. 6개월동안 회원들이 어떤 품목을 얼마나 주문했는지 알려면?
```

회원 관리 시스템 + 주문 관리 시스템의 JOIN으로 결과 도출 가능.

운영 시스템 부하 발생 가능

-> 앱 정상 동작 x, 데이터베이스 분석하는 동안 사용 불가

-> **SQL은 작은 규모의 데이터 조회, 삽입, 삭제, 수정이 목적**

-> **대규모 데이터 분석 작업**을 위한 데이터 웨어하우스 필요

<br>

### 목적

> Data Warehouse의 목적

- **데이터에 기반**한 의사 결정
- 여러 소스의 **데이터를 통합**한 분석
- 데이터의 **높은 품질**(일관성, 정확성)
- 과거 데이터 분석
- 기존 데이터를 활용하여 더 나은 정보 제공

<br>

### 아키텍처

> 3개의 Tier로 구성

<img src="DB 09.assets\Data Warehouse_three_tiers.png">

- Bottom Tier
  - Transaction System, RDB를 비롯한 데이터 (raw data)
  - 데이터가 로드되고 저장되는 데이터베이스 서버 티어
  - ETL
    - 데이터를 추출, 가공 후 Data Warehouse에 적재하는 모든 과정
    - Extract : 하나 이상의 데이터 원천들로부터 데이터 획득
    - Transform : 데이터 클렌징, 형식 변환 및 표준화, 통합 또는 다수 애플리케이션에 내장된 비즈니스 룰 적용 등
    - Load : 변형 단계의 처리가 완료된 데이터를 특정 목표 시스템에 적재
- Middle Tier
  - 데이터를 액세스하고 분석하는 엔진
- Top Tier
  - 통계, 분석, 데이터 마이닝, AI 등을 통해 분석한 결과를 리포팅하는 Frontend
  - 가시성을 제공하는 티어

<br>

### 추가로 알아두면 좋을 용어

- 데이터 레이크(Data Lake)
  - 가공되지 않은 다양한 종류의 데이터를 한 곳에 모아둔 저장소
  - 빅데이터를 효율적으로 분석 & 사용하고자 함
- 데이터 마트(Data Mart)
  - 특정 팀 or 사업 단위의 요구를 충족시키는 Data Warehouse
  - 규모가 더 작고, 집중적이며 사용자 커뮤니티에 가장 잘 맞는 데이터 요약 포함 가능
  - Data Warehouse의 일부일 수 있음.
