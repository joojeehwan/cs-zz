# DB #7 INDEX

### INDEX

> - RDBMS에서 **검색 속도**를 높이기 위해 사용하는 기술.
>   - SELECT의 WHERE / JOIN 을 사용할 때 INDEX를 활용
>
> - 책의 **색인**과 같은 개념
>   - 데이터와 데이터의 위치를 포함한 자료구조를 생성.
>   - INDEX를 활용하면 **Full Scan**을 진행하지 않아 **빠른 조회** 가능.

<br>

### INDEX 관리

> 최신의 정렬된 상태 유지를 통한 빠른 탐색 가능

INDEX가 적용된 컬럼에 **INSERT**, **DELETE**, **UPDATE**가 수행되면 추가 연산을 진행해야 한다.

- `INSERT`
  - 새로운 데이터에 대한 INDEX 추가
- `DELETE`
  - 데이터를 지우기 X
  - 사용 안됨 표시 O
  - TABLE에 데이터가 10000개가 있을 때, INDEX는 20000, 30000개가 존재할 수 있음.
- `UPDATE`
  - UPDATE의 개념 존재 X
  - `DELETE` + `INSERT`의 작업 진행
  - 한 번에 두 가지 작업이 진행되니 큰 부하 발생 가능.

<br>

### INDEX 장 / 단점

- `장점`

  - TABLE을 조회하는 속도와 그에 따른 성능 향상 가능

  - 전반적인 시스템 부하 감소

- `단점`
  - INDEX 관리를 위한 DB의 약 10% 가량의 저장 공간 필요.
  - INDEX 생성 및 관리를 위한 추가 작업 필요
  - 잘못된 사용으로 인한 성능 저하 유발

<br>

### INDEX 유의사항

- INDEX를 사용하면 좋은 경우

  - 규모가 큰 TABLE
  - `INSERT`, `DELETE`, `UPDATE`가 자주 발생하지 않는 COLUMN
  - JOIN, WHERE에서 자주 사용되는 COLUMN
  - 데이터의 중복도가 낮은 COLUMN

- 잘못된 사용

  - Full Scan보다 느려질 수 있음.

  - 데이터 중복도가 높은 COLUMN 사용

    - 회원 TABLE

      | 회원번호 | 이름   | 주민등록번호   | 성별 | 지역 |
      | -------- | ------ | -------------- | ---- | ---- |
      | 1        | 주영호 | 990101-1234567 | 남   | 서울 |
      | 2        | 홍길동 | 881231-1111111 | 남   | 부산 |
      | 3        | 이순신 | 850316-1222222 | 남   | 대구 |
      | 4        | 이방원 | 000707-3333333 | 남   | 인천 |
      | 5        | 유성룡 | 010815-4444444 | 여   | 서울 |
      | 6        | 주영호 | 931111-1765432 | 남   | 서울 |

      데이터 중복도 (높음 -> 낮음) : 성별 > 지역 > 이름 > 주민등록번호

      데이터 중복도가 높은 COLUMN을 INDEX로 사용하면 성능이 거의 향상되지 않음.

      최대한 **고유한 값**을 갖는 필드를 선택하는 것이 중요.

  - DML(INSERT, DELETE, UPDATE)가 자주 일어나는 COLUMN 사용
    - UPDATE, DELETE가 빈번히 사용되면 INDEX가 거대해짐.
    - 쿼리문 처리 시 거대해진 INDEX를 조회하느라 성능이 오히려 저하되는 경우 발생.

